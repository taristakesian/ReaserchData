## Задача
Предсказание мошенничества по транзакциям в **digital-каналах (web/mobile)**.

---

## Как решал (шаги)
1. **Подготовка данных.** Дедуп по `transaction_id`, вырезали утечки: `channel='pos'` и `is_card_present` (POS-прокси) из общей модели. Конвертация в USD уже присутствует (`amount_usd`).
2. **Разведка (EDA).** Проверили силу предикторов (std разброса fraud-rate), построили лифты по ключам, сравнили медианы поведенки.
3. **Набор признаков.** Использовали исходные колонки без нового фичеинжа; сделали жёсткий срез POS.
4. **Валидация.** Сплит **80/20 по времени** (train — прошлое, test — будущее), без перемешивания.
5. **Модели.** Бейзлайны LogReg/SGD/Tree; основная — **CatBoost** с нативными категориальными, баланс классов, early stopping.
6. **Пороговая политика.** Вычислили метрики на **maxF1** и подготовили режим **precision ≥ 95%** (для прод).

---

## Чем пользовался
- **Python:** `polars`, `pandas`, `numpy`, `matplotlib`  
- **ML:** `catboost`, `scikit-learn`

> Инструменты выбраны за скорость на больших объёмах (Polars), нативные категориальные (CatBoost) и простую воспроизводимость.

---

## Ключевые решения (и почему)
- **POS отдельно.** `channel='pos'` даёт всегда `is_fraude=1` (почти «лейбл»), убираем из общей модели → честная обобщаемость; для POS — отдельная логика/модель.
- **География и время в ядре.** По EDA: лифты по `country/currency` до ~**1.9×**, ночь **01–04** ~**3×**, `is_outside_home_country` — самый сильный сигнал.
- **Поведенческие признаки слабые.** `num_transactions` / `total_amount` / `unique_*` по медианам у фрода/легита почти равны → держим низкий приоритет или исключаем.
- **Простые признаки, никакой «магии».** На этом этапе **без новых фичей** — всё прозрачно и воспроизводимо.

---

## Итоги EDA (из кода)
- **Сильные:** `is_outside_home_country` (std **0.3839**), `country` (std **0.1476**), `currency` (std **0.1512**), `hour` (std **0.1765**).  
- **Слабые/нулевые:** `vendor_category`, `card_type`, `device`, `is_weekend`, `weekday`, `city_size`; `vendor_type` — близко к нулю.  
- **Лифты:** топ-страны/валюты (Mexico/Russia/Brazil/Nigeria) ~**1.8–1.9×**; ночь **01–04** ~**3×**.

---

## Модель и метрики (test, 20% по времени)
**CatBoost (основная):**
| ROC-AUC | PR-AUC | Precision@maxF1 | Recall@maxF1 | F1@maxF1 |
|:------:|:------:|:----------------:|:------------:|:--------:|
| 0.9864 | 0.9388 |      0.8790      |    0.8346    |  0.8563  |

**Вывод.** Модель уверенно отделяет фрод; на «сбалансированном» пороге даёт сильный компромисс. Для строгой фильтрации поднимаем порог до **precision ≥ 95%** (с неизбежным падением recall) или используем **сегментные пороги** (high/mid-risk).

---

## Как принимал решения
- **Данные → EDA → гипотезы → валидация.** Любой вывод подтверждали цифрами: std разброса, лифты, медианы, затем — метрики на отложенной выборке.
- **Принцип «сначала просто».** Никакого сложного фичеинжа до доказательства ценности; сперва чистим утечки и фиксируем базовые сильные сигналы.
- **Бизнес-обоснование.** Порог и режим задаются KPI: минимум ложных блокировок (**precision**) при приемлемом охвате (**recall**).

